# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üö® **–ü—Ä–æ–±–ª–µ–º–∞:**
```
ERROR: 42703: column "project_id" does not exist
```

## üîç **–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**

–í —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–¥–≤–µ —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Å–≤—è–∑–µ–π** –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏:

### **–ú–æ–¥–µ–ª—å 1: –ü—Ä—è–º–∞—è —Å–≤—è–∑—å (—Å—Ç–∞—Ä–∞—è)**
```sql
qualification_objects.project_id ‚Üí projects.id
```

### **–ú–æ–¥–µ–ª—å 2: –°–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ (–Ω–æ–≤–∞—è)**
```sql
projects.id ‚Üí project_qualification_objects.project_id
project_qualification_objects.qualification_object_id ‚Üí qualification_objects.id
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∫—Ä–∏–ø—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—ã—Ç–∞–ª—Å—è —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å –ø–æ `project_id` –≤ `qualification_objects`, –Ω–æ —ç—Ç–∞ –∫–æ–ª–æ–Ω–∫–∞ –º–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ç–µ–∫—É—â–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## üìÅ **–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–µ—à–µ–Ω–∏—è:**

### **1. `database_optimization_fixed.sql` ‚úÖ**
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ–∞–π–ª** –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å —Å–≤—è–∑–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –°–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–ª–æ–Ω–æ–∫
- –ë–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### **2. `check_current_structure.sql` üîç**
- –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –∫–æ–ª–æ–Ω–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∞—è –º–æ–¥–µ–ª—å —Å–≤—è–∑–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### **3. `database_optimization_simple.sql` ‚ö†Ô∏è**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
- –í—Å–µ –µ—â–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

## üöÄ **–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É:**

### **–®–∞–≥ 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `check_current_structure.sql`
4. –ò–∑—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### **–®–∞–≥ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `database_optimization_fixed.sql`
2. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
3. –°–æ–∑–¥–∞—Å—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã

## üîß **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –Ω–æ–≤–æ–º —Å–∫—Ä–∏–ø—Ç–µ:**

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫:**
```sql
DO $$
BEGIN
    IF EXISTS (
        SELECT 1 FROM information_schema.columns 
        WHERE table_name = 'qualification_objects' AND column_name = 'project_id'
    ) THEN
        CREATE INDEX IF NOT EXISTS idx_qualification_objects_project_type 
        ON qualification_objects (project_id, type);
    END IF;
END $$;
```

### **2. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:**
```sql
-- –ï—Å–ª–∏ –µ—Å—Ç—å project_qualification_objects, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë
IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'project_qualification_objects') THEN
    -- –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Å–≤—è–∑—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ–π
ELSIF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = 'qualification_objects' AND column_name = 'project_id') THEN
    -- –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –ø—Ä—è–º–æ–π —Å–≤—è–∑—å—é
ELSE
    -- –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
END IF;
```

### **3. –£—Å–ª–æ–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**
```sql
-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è project_qualification_objects (–µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
DO $$
BEGIN
    IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'project_qualification_objects') THEN
        CREATE INDEX IF NOT EXISTS idx_project_qualification_objects_project_id 
        ON project_qualification_objects (project_id);
    END IF;
END $$;
```

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**

### **–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥–µ–ª—å 1 (–ø—Ä—è–º–∞—è —Å–≤—è–∑—å):**
- `qualification_objects` –∏–º–µ–µ—Ç –∫–æ–ª–æ–Ω–∫—É `project_id`
- –ù–µ—Ç —Ç–∞–±–ª–∏—Ü—ã `project_qualification_objects`
- –°–æ–∑–¥–∞—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä—è–º–æ–π —Å–≤—è–∑–∏

### **–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥–µ–ª—å 2 (—Å–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞):**
- `qualification_objects` –ù–ï –∏–º–µ–µ—Ç –∫–æ–ª–æ–Ω–∫—É `project_id`
- –ï—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ `project_qualification_objects`
- –°–æ–∑–¥–∞—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã

## ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
SELECT * FROM get_database_stats();

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
SELECT * FROM check_data_integrity();

-- –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
SELECT * FROM analyze_index_usage();

-- –†–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü
SELECT * FROM get_table_sizes();
```

## üéØ **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

### **–£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**
- ‚úÖ –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞

### **–£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- **–ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤:** 10-50x –±—ã—Å—Ç—Ä–µ–µ
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤:** 5-20x –±—ã—Å—Ç—Ä–µ–µ
- **–ü–æ–∏—Å–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏:** 3-15x –±—ã—Å—Ç—Ä–µ–µ
- **–ó–∞–ø—Ä–æ—Å—ã –ø–æ –¥–∞—Ç–∞–º:** 5-25x –±—ã—Å—Ç—Ä–µ–µ

## üö® **–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**

### **1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏–Ω–¥–µ–∫—Å–æ–≤
- –ù–µ —Å–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–ª–æ–Ω–æ–∫
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±–æ–π –º–æ–¥–µ–ª—å—é —Å–≤—è–∑–µ–π

### **2. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±–µ–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏ —Å–≤—è–∑–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ë–î
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### **3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-30 –º–∏–Ω—É—Ç
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü
- –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å

## üîß **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:**

### **–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `check_current_structure.sql`
2. –ò–∑—É—á–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
3. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –≤—Ä—É—á–Ω—É—é –ø–æ –æ–¥–Ω–æ–º—É

### **–ï—Å–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É–ª—É—á—à–∏–ª–∞—Å—å:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `ANALYZE;`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–ª–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω–¥–µ–∫—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

### **–ï—Å–ª–∏ –ë–î —Å—Ç–∞–ª–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã
2. –£–¥–∞–ª–∏—Ç–µ –ª–∏—à–Ω–∏–µ –∏–Ω–¥–µ–∫—Å—ã
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã

## üìà **–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞:**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚ùå –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: –Ø–Ω–≤–∞—Ä—å 2025*  
*–í–µ—Ä—Å–∏—è: 1.1 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞*















