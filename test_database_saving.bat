@echo off
echo ========================================
echo Тест сохранения данных в базе данных
echo ========================================
echo.
echo Проверяемые функции:
echo 1. Сохранение комментариев пользователей
echo 2. Сохранение статусов согласования документов
echo 3. Загрузка истории согласований
echo 4. Сохранение данных между сессиями
echo.
echo Инструкции для тестирования:
echo.
echo 1. Убедитесь, что выполнены SQL команды из create_document_approval_tables.sql
echo 2. Запустите приложение: start_with_database_saving.bat
echo 3. Авторизуйтесь в приложении
echo 4. Перейдите на страницу "Согласование договора"
echo.
echo Тест 1 - Комментарии:
echo - Добавьте комментарий к любому документу
echo - Обновите страницу (F5)
echo - Комментарий должен остаться
echo.
echo Тест 2 - Согласование документов:
echo - Согласуйте документ (нажмите "Согласовано")
echo - Обновите страницу (F5)
echo - Статус должен остаться "Согласовано"
echo - История согласований должна отображаться
echo.
echo Тест 3 - Отмена согласования:
echo - Отмените согласование (нажмите "Отменить согласование")
echo - Обновите страницу (F5)
echo - Статус должен вернуться к "Ожидает согласования"
echo - История должна содержать запись об отмене
echo.
echo Тест 4 - Проверка в базе данных:
echo - Откройте Supabase Dashboard
echo - Перейдите в Table Editor
echo - Проверьте таблицы document_comments и document_approvals
echo - Должны быть записи с вашими действиями
echo.
echo SQL запросы для проверки:
echo.
echo -- Просмотр комментариев
echo SELECT * FROM document_comments ORDER BY created_at DESC;
echo.
echo -- Просмотр согласований
echo SELECT * FROM document_approvals ORDER BY created_at DESC;
echo.
echo -- Статистика по статусам
echo SELECT status, COUNT(*) FROM document_approvals GROUP BY status;
echo.
echo Ожидаемые результаты:
echo - Комментарии сохраняются в document_comments
echo - Согласования сохраняются в document_approvals
echo - Данные не теряются при обновлении страницы
echo - История согласований отображается корректно
echo.
echo Если тесты проходят успешно:
echo ✅ Проблема с сохранением данных решена
echo ✅ Комментарии и статусы сохраняются в базе данных
echo ✅ Приложение готово к использованию
echo.
pause























