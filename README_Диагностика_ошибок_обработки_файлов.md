# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –±–ª–æ–∫–µ "–°–Ω—è—Ç–∏–µ –ª–æ–≥–≥–µ—Ä–æ–≤"

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ–± –æ—à–∏–±–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –±–ª–æ–∫–µ "–°–Ω—è—Ç–∏–µ –ª–æ–≥–≥–µ—Ä–æ–≤". –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–π—Ç–∏, –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞.

## üîç **–≠—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤**

### **1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (`handleLoggerRemovalFileUpload`)**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–º–∞–∫—Å–∏–º—É–º 10MB)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –í—ã–∑–æ–≤ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è `.vi2`, `.xls`, `.xlsx` —Ñ–∞–π–ª–æ–≤

### **2. –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–∞ (`handleFileParsing`)**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ `levelId` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–æ–Ω—ã –∏ —É—Ä–æ–≤–Ω—è
- ‚úÖ –ü–æ–∏—Å–∫ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–∞
- ‚úÖ –í—ã–±–æ—Ä –ø–∞—Ä—Å–µ—Ä–∞ (VI2 –∏–ª–∏ XLS)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### **3. –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Storage (`uploadLoggerRemovalFile`)**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –ø–æ –ø—É—Ç–∏ `logger-removal/{objectId}/zone-{zone}-level-{level}`
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –≤ Supabase Storage
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL

### **4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (`saveLoggerData`)**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤–æ–¥–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ `logger_data_summary`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ `logger_data_records`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ `parsing_status = 'completed'`

## üõ†Ô∏è **–î–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **–í `handleLoggerRemovalFileUpload`:**
```typescript
console.log('QualificationWorkSchedule: handleLoggerRemovalFileUpload –≤—ã–∑–≤–∞–Ω–∞', {
  levelId,
  fileName: file.name,
  fileSize: file.size,
  fileType: file.type
});

console.log('QualificationWorkSchedule: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞', {
  fileName: file.name,
  fileExtension,
  fileType: file.type,
  allowedTypes,
  allowedExtensions,
  isTypeAllowed: allowedTypes.includes(file.type),
  isExtensionAllowed: allowedExtensions.includes(fileExtension)
});
```

### **–í `handleFileParsing`:**
```typescript
console.log('QualificationWorkSchedule: handleFileParsing –≤—ã–∑–≤–∞–Ω–∞', {
  levelId,
  fileName: file.name,
  fileSize: file.size,
  fileExtension,
  fileType: file.type
});

console.log('QualificationWorkSchedule: –ù–∞—á–∏–Ω–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–∞:', {
  fileName: file.name,
  fileExtension,
  zoneNumber,
  measurementLevel,
  loggerName,
  measurementZones: measurementZones.length,
  zone: zone ? '–Ω–∞–π–¥–µ–Ω–∞' : '–Ω–µ –Ω–∞–π–¥–µ–Ω–∞',
  level: level ? '–Ω–∞–π–¥–µ–Ω' : '–Ω–µ –Ω–∞–π–¥–µ–Ω'
});
```

### **–í –±–ª–æ–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:**
```typescript
console.error('QualificationWorkSchedule: –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–∞–π–ª–∞:', {
  levelId,
  fileName: file.name,
  fileExtension,
  error: error instanceof Error ? error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞',
  stack: error instanceof Error ? error.stack : undefined
});
```

## üîß **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ**

### **1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞**
- –ù–∞–∂–º–∏—Ç–µ `F12` –∏–ª–∏ `Ctrl+Shift+I`
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É `Console`

### **2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ñ–∞–π–ª**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –±–ª–æ–∫–æ–º "–°–Ω—è—Ç–∏–µ –ª–æ–≥–≥–µ—Ä–æ–≤"
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### **3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç**
```javascript
// –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ debug_file_processing.js –≤ –∫–æ–Ω—Å–æ–ª—å
```

### **4. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏**

**–ò—â–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**

**‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:**
```
QualificationWorkSchedule: handleLoggerRemovalFileUpload –≤—ã–∑–≤–∞–Ω–∞
QualificationWorkSchedule: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞
QualificationWorkSchedule: –ó–∞–ø—É—Å–∫–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–∞
QualificationWorkSchedule: handleFileParsing –≤—ã–∑–≤–∞–Ω–∞
QualificationWorkSchedule: –ù–∞—á–∏–Ω–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–∞
```

**‚ùå –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏:**
```
QualificationWorkSchedule: –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞
QualificationWorkSchedule: –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π
```

**‚ùå –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
```
QualificationWorkSchedule: –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å levelId
QualificationWorkSchedule: –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–∞–π–ª–∞
XLSParser: –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç—ã
```

## üö® **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ–∫**

### **1. –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–æ–º —Ñ–∞–π–ª–∞:**
- –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π MIME-—Ç–∏–ø
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
- –§–∞–π–ª –ø–æ–≤—Ä–µ–∂–¥–µ–Ω –∏–ª–∏ –ø—É—Å—Ç–æ–π

### **2. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –≤ XLS —Ñ–∞–π–ª–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ

### **3. –ü—Ä–æ–±–ª–µ–º—ã —Å Storage:**
- –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Supabase Storage
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ Storage

### **4. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:**
- –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ `logger_data_summary`
- –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ `logger_data_records`
- –ü—Ä–æ–±–ª–µ–º—ã —Å RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏

## üìã **–ß–µ–∫-–ª–∏—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**

### **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- [ ] –¢–∏–ø —Ñ–∞–π–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (`.vi2`, `.xls`, `.xlsx`)
- [ ] –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 10MB
- [ ] –§–∞–π–ª –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
- [ ] –í XLS —Ñ–∞–π–ª–µ –µ—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∏ —Å –¥–∞—Ç–æ–π –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π
- [ ] –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –≤ XLS —Ñ–∞–π–ª–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] Supabase Storage –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞

### **–î–ª—è XLS —Ñ–∞–π–ª–æ–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- [ ] –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏
- [ ] –ï—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∞ —Å –¥–∞—Ç–æ–π/–≤—Ä–µ–º–µ–Ω–µ–º
- [ ] –ï—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∞ —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π
- [ ] –î–∞–Ω–Ω—ã–µ –≤ —á–∏—Å–ª–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- [ ] –ù–µ—Ç –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞

## üéØ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ñ–∞–π–ª** –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —ç—Ç–∞–ø**, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞** –∏ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
4. **–°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üìÅ **–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏**

- `src/components/QualificationWorkSchedule.tsx` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
- `src/utils/xlsParser.ts` - –ø–∞—Ä—Å–µ—Ä XLS —Ñ–∞–π–ª–æ–≤
- `src/utils/vi2ParsingService.ts` - –ø–∞—Ä—Å–µ—Ä VI2 —Ñ–∞–π–ª–æ–≤
- `src/utils/qualificationObjectService.ts` - —Ä–∞–±–æ—Ç–∞ —Å Storage
- `src/utils/loggerDataService.ts` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–∞ –æ—à–∏–±–∫–∏!** üîç



















