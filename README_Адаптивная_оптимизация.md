# üîß –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üìã –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞:
```
ERROR: 42P01: relation "qualification_stages" does not exist
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–µ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–æ–π —Å—Ö–µ–º—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## üéØ –†–µ—à–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω **–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç** `database_optimization_adaptive.sql`, –∫–æ—Ç–æ—Ä—ã–π:

- ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ** –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ** –∫–∞–∂–¥–æ–π –∫–æ–ª–æ–Ω–∫–∏ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É** —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, pg_trgm)
- ‚úÖ **–í—ã–≤–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ —Ç–æ–º, —á—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ, –∞ —á—Ç–æ –ø—Ä–æ–ø—É—â–µ–Ω–æ
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ** —Å –ª—é–±–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

### 1. **–°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü:**
- `contractors`
- `projects` 
- `qualification_objects`
- `qualification_stages` ‚Üê **–≠—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**
- `project_documents`
- `uploaded_files`
- `audit_logs`

### 2. **–°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫:**
- `measurement_zones` –≤ `qualification_objects`
- `details` –≤ `audit_logs`
- `plan_file_url` –≤ `qualification_objects`
- `latitude`, `longitude` –≤ `qualification_objects`
- `serial_number` –≤ `qualification_objects`
- `inventory_number` –≤ `qualification_objects`

### 3. **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:**
- `pg_trgm` –¥–ª—è —Ç—Ä–∏–≥—Ä–∞–º–º–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

### 1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:
```sql
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ database_optimization_adaptive.sql
-- –≤ Supabase SQL Editor
```

### 2. –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
–°–∫—Ä–∏–ø—Ç –≤—ã–≤–µ–¥–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–∏–ø–∞:
```
NOTICE: –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è contractors —Å–æ–∑–¥–∞–Ω—ã
NOTICE: –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è projects —Å–æ–∑–¥–∞–Ω—ã
NOTICE: –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è qualification_objects —Å–æ–∑–¥–∞–Ω—ã
NOTICE: –¢–∞–±–ª–∏—Ü–∞ qualification_stages –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
NOTICE: –¢–∞–±–ª–∏—Ü–∞ project_documents –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
NOTICE: –¢–∞–±–ª–∏—Ü–∞ uploaded_files –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
NOTICE: –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è audit_logs —Å–æ–∑–¥–∞–Ω—ã
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∂–µ—Ç:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü

## üìä –ß—Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ

### ‚úÖ **–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü:**

#### **contractors:**
- `idx_contractors_name_lower` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- `idx_contractors_address` - –ø–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É

#### **projects:**
- `idx_projects_contractor_status` - –ø—Ä–æ–µ–∫—Ç—ã –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É –∏ —Å—Ç–∞—Ç—É—Å—É
- `idx_projects_created_at` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
- `idx_projects_contract_date` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ –¥–æ–≥–æ–≤–æ—Ä–∞
- `idx_projects_active` - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

#### **qualification_objects:**
- `idx_qualification_objects_contractor_type` - –æ–±—ä–µ–∫—Ç—ã –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É –∏ —Ç–∏–ø—É
- `idx_qualification_objects_type` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É
- `idx_qualification_objects_manufacturer` - –ø–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—é
- `idx_qualification_objects_created_at` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
- `idx_qualification_objects_updated_at` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `idx_qualification_objects_measurement_zones_gin` - GIN –∏–Ω–¥–µ–∫—Å –¥–ª—è JSONB
- `idx_qualification_objects_with_plans` - –æ–±—ä–µ–∫—Ç—ã —Å –ø–ª–∞–Ω–∞–º–∏
- `idx_qualification_objects_with_coordinates` - –æ–±—ä–µ–∫—Ç—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- `idx_qualification_objects_name_trgm` - —Ç—Ä–∏–≥—Ä–∞–º–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- `idx_qualification_objects_address_trgm` - —Ç—Ä–∏–≥—Ä–∞–º–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É
- `idx_qualification_objects_serial_number` - –ø–æ–∏—Å–∫ –ø–æ —Å–µ—Ä–∏–π–Ω–æ–º—É –Ω–æ–º–µ—Ä—É
- `idx_qualification_objects_inventory_number` - –ø–æ–∏—Å–∫ –ø–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–Ω–æ–º—É –Ω–æ–º–µ—Ä—É
- `idx_qualification_objects_contractor_fk` - FK –∏–Ω–¥–µ–∫—Å

#### **audit_logs:**
- `idx_audit_logs_user_action` - –ª–æ–≥–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –¥–µ–π—Å—Ç–≤–∏—é
- `idx_audit_logs_entity` - –ª–æ–≥–∏ –ø–æ —Ç–∏–ø—É –∏ ID —Å—É—â–Ω–æ—Å—Ç–∏
- `idx_audit_logs_created_at` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
- `idx_audit_logs_details_gin` - GIN –∏–Ω–¥–µ–∫—Å –¥–ª—è JSONB

### ‚ùå **–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `qualification_stages` - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- `project_documents` - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç  
- `uploaded_files` - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü.

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π:**
–ï—Å–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `pg_trgm` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Ç—Ä–∏–≥—Ä–∞–º–º–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è.

### 3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –±–ª–æ–∫–∞—Ö `DO $$`, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏.

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º –∏ –∞–¥—Ä–µ—Å–∞–º –æ–±—ä–µ–∫—Ç–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º –∏ —Ç–∏–ø–∞–º
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –¥–∞—Ç–∞–º
- **–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø** –∫ JSONB –¥–∞–Ω–Ω—ã–º

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **–ù–µ—Ç –æ—à–∏–±–æ–∫** –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–∞–±–ª–∏—Ü
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** –∫ –ª—é–±–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ë–î
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø—Ä–æ—Ü–µ—Å—Å–µ

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `database_optimization_adaptive.sql` —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.

**–¢–µ–ø–µ—Ä—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫!** üéâ










