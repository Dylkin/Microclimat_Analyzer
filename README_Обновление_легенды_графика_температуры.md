# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã –≥—Ä–∞—Ñ–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

## üéØ **–ó–∞–¥–∞—á–∞**

–ò–∑–º–µ–Ω–∏—Ç—å –ª–µ–≥–µ–Ω–¥—É –≥—Ä–∞—Ñ–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, —á—Ç–æ–±—ã –æ–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–æ–≤ –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, –≤–º–µ—Å—Ç–æ –æ–±—â–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∑–æ–Ω.

## üîß **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**

### **1. –û–±–Ω–æ–≤–ª–µ–Ω `src/types/TimeSeriesData.ts`:**

**–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `loggerName`:**
```typescript
export interface TimeSeriesPoint {
  timestamp: number;
  temperature?: number;
  humidity?: number;
  fileId: string;
  originalIndex: number;
  zoneNumber?: number;
  measurementLevel?: number;
  deviceSerialNumber?: string;
  loggerName?: string; // ‚Üê –ù–æ–≤–æ–µ –ø–æ–ª–µ
}
```

### **2. –û–±–Ω–æ–≤–ª–µ–Ω `src/hooks/useTimeSeriesData.ts`:**

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–∞ –≤ –¥–∞–Ω–Ω—ã–µ:**
```typescript
const points: TimeSeriesPoint[] = records.map((record: any, index: number) => ({
  timestamp: new Date(record.timestamp).getTime(),
  temperature: record.temperature,
  humidity: record.humidity,
  fileId: `zone-${summary.zone_number}-level-${summary.measurement_level}`,
  originalIndex: index,
  zoneNumber: summary.zone_number,
  measurementLevel: summary.measurement_level,
  deviceSerialNumber: record.device_serial_number || summary.serial_number || 'Unknown',
  loggerName: summary.logger_name || `–õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ ${summary.zone_number} —É—Ä–æ–≤–µ–Ω—å ${summary.measurement_level}` // ‚Üê –ù–æ–≤–æ–µ –ø–æ–ª–µ
}));
```

### **3. –û–±–Ω–æ–≤–ª–µ–Ω `src/components/TimeSeriesChart.tsx`:**

**–ò–∑–º–µ–Ω–µ–Ω–∞ –ª–µ–≥–µ–Ω–¥–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –ª–æ–≥–≥–µ—Ä–æ–≤:**

**–î–æ:**
```typescript
{/* –õ–µ–≥–µ–Ω–¥–∞ */}
{showLegend && dataByFile.size > 1 && (
  <div className="mb-4 p-3 bg-gray-50 rounded-lg">
    <div className="text-sm text-gray-700">
      <span className="font-medium">–§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö: </span>
      {Array.from(dataByFile.keys()).map(fileId => {
        const shortName = fileId.substring(0, 6);
        const color = fileColors.get(fileId);
        const fileData = data.find(d => d.fileId === fileId);
        const isExternal = fileData?.zoneNumber === 999;
        const displayColor = isExternal ? '#6B7280' : color;
        return (
          <span key={fileId} className="inline-flex items-center space-x-1 mr-3">
            <div 
              className="w-2 h-2 rounded-full"
              style={{ backgroundColor: displayColor }}
            ></div>
            <span>{shortName}{isExternal ? ' (–í–Ω–µ—à–Ω–∏–π)' : ''}</span>
          </span>
        );
      })}
    </div>
  </div>
)}
```

**–ü–æ—Å–ª–µ:**
```typescript
{/* –õ–µ–≥–µ–Ω–¥–∞ */}
{showLegend && dataByFile.size > 1 && (
  <div className="mb-4 p-3 bg-gray-50 rounded-lg">
    <div className="text-sm text-gray-700">
      <span className="font-medium">–õ–æ–≥–≥–µ—Ä—ã: </span>
      {Array.from(dataByFile.keys()).map(fileId => {
        const color = fileColors.get(fileId);
        const fileData = data.find(d => d.fileId === fileId);
        const isExternal = fileData?.zoneNumber === 999;
        const displayColor = isExternal ? '#6B7280' : color;
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–≥–≥–µ—Ä–∞, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å, –∏–Ω–∞—á–µ fallback –Ω–∞ fileId
        const displayName = fileData?.loggerName || fileId;
        return (
          <span key={fileId} className="inline-flex items-center space-x-1 mr-3">
            <div 
              className="w-2 h-2 rounded-full"
              style={{ backgroundColor: displayColor }}
            ></div>
            <span>{displayName}{isExternal ? ' (–í–Ω–µ—à–Ω–∏–π)' : ''}</span>
          </span>
        );
      })}
    </div>
  </div>
)}
```

## üé® **–†–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π**

### **–î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- –õ–µ–≥–µ–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞: "–§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö: zone-1-l, zone-2-l, zone-3-l"
- –ö–æ—Ä–æ—Ç–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∑–æ–Ω (–æ–±—Ä–µ–∑–∞–Ω–Ω—ã–µ –¥–æ 6 —Å–∏–º–≤–æ–ª–æ–≤)
- –ù–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è

### **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- –õ–µ–≥–µ–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "–õ–æ–≥–≥–µ—Ä—ã: [–ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ–≥–≥–µ—Ä–∞ 1], [–ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ–≥–≥–µ—Ä–∞ 2], [–ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ–≥–≥–µ—Ä–∞ 3]"
- –ü–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è

### **–ü—Ä–∏–º–µ—Ä—ã –Ω–∞–∑–≤–∞–Ω–∏–π –ª–æ–≥–≥–µ—Ä–æ–≤:**
- "–õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ 1 —É—Ä–æ–≤–µ–Ω—å 0"
- "–õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ 2 —É—Ä–æ–≤–µ–Ω—å 0" 
- "–õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ 3 —É—Ä–æ–≤–µ–Ω—å 0"
- "–í–Ω–µ—à–Ω–∏–π –¥–∞—Ç—á–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã"
- "–î–∞—Ç—á–∏–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ –ø–æ–º–µ—â–µ–Ω–∏—è"

## üîÑ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã**

### **–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–∞–∑–≤–∞–Ω–∏–π –ª–æ–≥–≥–µ—Ä–æ–≤:**
1. **–û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫:** –ü–æ–ª–µ `logger_name` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `logger_data_summary`
2. **Fallback:** –ï—Å–ª–∏ `logger_name` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `–õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ ${zoneNumber} —É—Ä–æ–≤–µ–Ω—å ${measurementLevel}`

### **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π:**
```typescript
loggerName: summary.logger_name || `–õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ ${summary.zone_number} —É—Ä–æ–≤–µ–Ω—å ${summary.measurement_level}`
```

### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ª–µ–≥–µ–Ω–¥–µ:**
```typescript
const displayName = fileData?.loggerName || fileId;
```

## üìä **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**

### **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Üí `logger_data_summary.logger_name`
2. **–•—É–∫** ‚Üí `useTimeSeriesData` ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç `loggerName` –≤ `TimeSeriesPoint`
3. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç** ‚Üí `TimeSeriesChart` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `loggerName` –≤ –ª–µ–≥–µ–Ω–¥–µ

### **–¢–∞–±–ª–∏—Ü–∞ `logger_data_summary`:**
```sql
CREATE TABLE logger_data_summary (
  id UUID PRIMARY KEY,
  project_id UUID,
  qualification_object_id UUID,
  zone_number INTEGER,
  measurement_level INTEGER,
  logger_name TEXT, -- ‚Üê –ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–∞–∑–≤–∞–Ω–∏–π –ª–æ–≥–≥–µ—Ä–æ–≤
  file_name TEXT,
  device_type INTEGER,
  device_model TEXT,
  serial_number TEXT,
  start_date TIMESTAMP,
  end_date TIMESTAMP,
  record_count INTEGER,
  parsing_status TEXT,
  error_message TEXT
);
```

## üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π**

1. **üìù –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å:**
   - –ü–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–æ–≤ –≤–º–µ—Å—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö ID
   - –õ–µ–≥—á–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏
   - –£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –≥—Ä–∞—Ñ–∏–∫–∞

2. **üé® –£–ª—É—á—à–µ–Ω–Ω—ã–π UX:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
   - –õ–µ–≥—á–µ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ª–æ–≥–≥–µ—Ä–∞–º–∏
   - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥ –æ—Ç—á–µ—Ç–∞

3. **üîß –ì–∏–±–∫–æ—Å—Ç—å:**
   - –ù–∞–∑–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–æ–≤ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤
   - Fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –¥–∞—Ç—á–∏–∫–æ–≤

4. **üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - –õ–µ–≥—á–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ª–æ–≥–≥–µ—Ä–∞–º
   - –ü–æ–Ω—è—Ç–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–æ–≤
   - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –ª–æ–≥–≥–µ—Ä–æ–≤:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ü–ª–∞–Ω-–≥—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç"
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ `.vi2` —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–æ–Ω

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö:**
   - –ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö" –≤ –±–ª–æ–∫–µ "–°–Ω—è—Ç–∏–µ –ª–æ–≥–≥–µ—Ä–æ–≤"
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–µ–≥–µ–Ω–¥—É:**
   - ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–õ–æ–≥–≥–µ—Ä—ã:" –≤–º–µ—Å—Ç–æ "–§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö:"
   - ‚úÖ –ü–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–æ–≤ –≤–º–µ—Å—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏—Ö ID
   - ‚úÖ –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ª–∏–Ω–∏—è–º –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ

### **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–õ–æ–≥–≥–µ—Ä—ã: ‚óè –õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ 1 —É—Ä–æ–≤–µ–Ω—å 0  ‚óè –õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ 2 —É—Ä–æ–≤–µ–Ω—å 0  ‚óè –õ–æ–≥–≥–µ—Ä –∑–æ–Ω–∞ 3 —É—Ä–æ–≤–µ–Ω—å 0
```

## üìã **–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**

- `src/types/TimeSeriesData.ts` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `TimeSeriesPoint` —Å –ø–æ–ª–µ–º `loggerName`
- `src/hooks/useTimeSeriesData.ts` - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –ª–æ–≥–≥–µ—Ä–æ–≤ –∏–∑ –ë–î
- `src/components/TimeSeriesChart.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –ª–æ–≥–≥–µ—Ä–æ–≤
- `src/utils/loggerDataService.ts` - –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö `logger_name`

## üéØ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

–ò–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–∏–ª–∏ –ª–µ–≥–µ–Ω–¥—É –≥—Ä–∞—Ñ–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –ª–æ–≥–≥–µ—Ä–æ–≤ –≤–º–µ—Å—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–æ–Ω. –¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–≥–≥–µ—Ä–æ–≤, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö.

**–†–µ–∑—É–ª—å—Ç–∞—Ç: –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –ª–µ–≥–µ–Ω–¥–∞ –≥—Ä–∞—Ñ–∏–∫–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –ª–æ–≥–≥–µ—Ä–æ–≤!** üéâ



















